language: python
python: 3.6

cache:
  apt: true

services:
- docker

install:
  # fetch docker container with all build deps pre-installed
  - docker pull jturney/mesoncorpusci

script:
  - "docker run jturney/mesoncorpusci /bin/sh -c \" \
     pip3 install git+https://github.com/mesonbuild/meson.git && \
     git clone --depth=50 --branch ${BRANCH} ${REPO} ${NAME} && \
     cd ${NAME} && \
     eval ${HACKS} && \
     meson _build ${SOURCEDIR}\" "
